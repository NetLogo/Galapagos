(()=>{"use strict";const t=t=>e=>t.getElementById(e),e=t=>e=>Array.from(t.querySelectorAll(e)),r=t=>r=>e(t)(r)[0];var o;!function(t){t[t.NLNumber=0]="NLNumber",t[t.NLWord=1]="NLWord",t[t.RGB=2]="RGB",t[t.RGBA=3]="RGBA",t[t.HSB=4]="HSB",t[t.HSBA=5]="HSBA",t[t.HSL=6]="HSL",t[t.HSLA=7]="HSLA"}(o||(o={}));class n{constructor(t,e){Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=t,this.value=e}}const i=new n("black",0),s=new n("white",9.9),a=new n("gray",5),u=new n("red",15),h=new n("orange",25),l=new n("brown",35),d=new n("yellow",45),c=new n("green",55),b=new n("lime",65),p=new n("turquoise",75),m=new n("cyan",85),g=new n("sky",95),w=new n("blue",105),y=new n("violet",115),B=new n("magenta",125),f=new n("pink",135),v=[i,s,a,u,h,l,d,c,b,p,m,g,w,y,B,f],L=(()=>{const t=v.flatMap((t=>{const e=t.value;return[s,i,a].includes(t)?[[e,t]]:[[e-5,i],[e,t],[e+4.9,s]]}));return Object.fromEntries(t)})(),H=t=>window.NLColorModel.colorToRGB(t),S=(t,e,r)=>window.NLColorModel.nearestColorNumberOfRGB(t,e,r),A=t=>Math.round(10*t)/10,x=t=>A(t/100*360);class k{constructor(t){Object.defineProperty(this,"number",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.number=t,this.proxy=this.toRGBA()}equals(t){if("object"==typeof t&&"toNLNumber"in t){const e=t.toNLNumber();return this.number===e.number}return!1}toString(){return`NLNumber(${this.number})`}toNLNumber(){return this}toNLWord(){return this.proxy.toNLWord()}toRGB(){const[t,e,r]=H(this.number);return new I(t,e,r)}toRGBA(){return this.toRGB().toRGBA()}toHSB(){return this.proxy.toHSB()}toHSBA(){return this.proxy.toHSBA()}toHSL(){return this.proxy.toHSL()}toHSLA(){return this.proxy.toHSLA()}toHexadecimal(){return this.proxy.toHexadecimal()}toGUI_HSLA(){return this.proxy.toGUI_HSLA()}withAlpha(t){return this.proxy.withAlpha(t)}}class N{constructor(t,e=0){Object.defineProperty(this,"literal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.literal=t,this.modifier=e,this.proxy=this.toRGBA()}static parse(t){const[e,r,o]=t.split(" "),n=v.find((t=>t.name===e));if(void 0!==n){const t="+"!==r&&"-"!==r||isNaN(Number(o))?0:"+"===r?Number(o):-Number(o);return new N(n,t)}throw new Error(`Invalid NL color word: ${e}`)}equals(t){if("object"==typeof t&&"toNLWord"in t){const e=t.toNLWord();return this.literal===e.literal&&this.modifier===e.modifier}return!1}toString(){return`NLWord(${this.toText()})`}toNLNumber(){return new k(this.literal.value+this.modifier)}toNLWord(){return this}toRGB(){return this.proxy.toRGB()}toRGBA(){return this.toNLNumber().toRGBA()}toHSB(){return this.proxy.toHSB()}toHSBA(){return this.proxy.toHSBA()}toHSL(){return this.proxy.toHSL()}toHSLA(){return this.proxy.toHSLA()}toHexadecimal(){return this.proxy.toHexadecimal()}toGUI_HSLA(){return this.proxy.toGUI_HSLA()}toText(){const t=0===this.modifier?"":(()=>` ${this.modifier>0?"+":"-"} ${Math.abs(this.modifier)}`)();return`${this.literal.name}${t}`}withAlpha(t){return this.proxy.withAlpha(t)}}class I{constructor(t,e,r){Object.defineProperty(this,"red",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"green",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.red=t,this.green=e,this.blue=r,this.proxy=this.toRGBA()}equals(t){if("object"==typeof t&&"toRGB"in t){const e=t.toRGB();return this.red===e.red&&this.green===e.green&&this.blue===e.blue}return!1}toString(){return`RGB(${this.red}, ${this.green}, ${this.blue})`}toNLNumber(){return new k(S(this.red,this.green,this.blue))}toNLWord(){const[t,e]=((t,e,r)=>{const o=S(t,e,r);if(L.hasOwnProperty(o))return[L[o],0];{const t=v.filter((t=>t!==i&&t!==s)).reduce(((t,e)=>Math.abs(o-e.value)<Math.abs(o-t.value)?e:t),new n("nonsense",1e9));return[t,Math.round(10*(o-t.value))/10]}})(this.red,this.green,this.blue);return new N(t,e)}toRGB(){return this}toRGBA(){return new G(this.red,this.green,this.blue,100)}toHSB(){return this.proxy.toHSB()}toHSBA(){return this.proxy.toHSBA()}toHSL(){return this.proxy.toHSL()}toHSLA(){return this.proxy.toHSLA()}toHexadecimal(){return this.proxy.toHexadecimal()}toGUI_HSLA(){return this.proxy.toGUI_HSLA()}withAlpha(t){return this.proxy.withAlpha(t)}}class G{constructor(t,e,r,o){Object.defineProperty(this,"red",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"green",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.red=t,this.green=e,this.blue=r,this.alpha=o}equals(t){if("object"==typeof t&&"toRGBA"in t){const e=t.toRGBA();return this.red===e.red&&this.green===e.green&&this.blue===e.blue&&this.alpha===e.alpha}return!1}toString(){return`RGBA(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`}toNLNumber(){return this.toRGB().toNLNumber()}toNLWord(){return this.toRGB().toNLWord()}toRGB(){return new I(this.red,this.green,this.blue)}toRGBA(){return this}toHSB(){return this.toHSBA().toHSB()}toHSBA(){const[t,e,r]=(()=>{const t=this.red/255,e=this.green/255,r=this.blue/255,o=Math.max(t,e,r),n=o-Math.min(t,e,r);let i=null;return i=0===n?0:n&&o===t?(e-r)/n:o===e?2+(r-t)/n:4+(t-e)/n,[60*(i<0?i+6:i),o&&n/o*100,100*o].map(A)})();return new R(t,e,r,this.alpha)}toHSL(){return this.toHSLA().toHSL()}toHSLA(){const[t,e,r]=(()=>{const t=this.red/255,e=this.green/255,r=this.blue/255,o=Math.max(t,e,r),n=o-Math.min(t,e,r),i=1-Math.abs(o+o-n-1),s=n&&(o===t?(e-r)/n:o===e?2+(r-t)/n:4+(t-e)/n);return[60*(s<0?s+6:s),100*(0!==i?n/i:0),(o+o-n)/2*100].map(A)})();return new E(t,e,r,this.alpha)}toHexadecimal(){return new D(this.red,this.green,this.blue,this.alpha)}toGUI_HSLA(){return this.toHSLA().toGUI_HSLA()}withAlpha(t){return new G(this.red,this.green,this.blue,t)}}class ${constructor(t,e,r){Object.defineProperty(this,"hue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"saturation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"brightness",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.hue=t,this.saturation=e,this.brightness=r,this.proxy=this.toHSBA()}equals(t){if("object"==typeof t&&"toHSB"in t){const e=t.toHSB();return this.hue===e.hue&&this.saturation===e.saturation&&this.brightness===e.brightness}return!1}toString(){return`HSB(${this.hue}, ${this.saturation}, ${this.brightness})`}toNLNumber(){return this.proxy.toNLNumber()}toNLWord(){return this.proxy.toNLWord()}toRGB(){return this.proxy.toRGB()}toRGBA(){return this.proxy.toRGBA()}toHSB(){return this}toHSBA(){return new R(this.hue,this.saturation,this.brightness,100)}toHSL(){return this.proxy.toHSL()}toHSLA(){return this.proxy.toHSLA()}toHexadecimal(){return this.proxy.toHexadecimal()}toGUI_HSLA(){return this.proxy.toGUI_HSLA()}withAlpha(t){return this.proxy.withAlpha(t)}}class R{constructor(t,e,r,o){Object.defineProperty(this,"hue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"saturation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"brightness",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.hue=t,this.saturation=e,this.brightness=r,this.alpha=o}equals(t){if("object"==typeof t&&"toHSBA"in t){const e=t.toHSBA();return this.hue===e.hue&&this.saturation===e.saturation&&this.brightness===e.brightness&&this.alpha===e.alpha}return!1}toString(){return`HSBA(${this.hue}, ${this.saturation}, ${this.brightness}, ${this.alpha})`}toNLNumber(){return this.toRGBA().toNLNumber()}toNLWord(){return this.toRGBA().toNLWord()}toRGB(){return this.toRGBA().toRGB()}toRGBA(){const t=t=>{const e=t=>(t+this.hue/60)%6,r=this.brightness/100*(1-this.saturation/100*Math.max(0,Math.min(e(t),4-e(t),1)));return Math.round(255*r)},e=t(5),r=t(3),o=t(1);return new G(e,r,o,this.alpha)}toHSB(){return new $(this.hue,this.saturation,this.brightness)}toHSBA(){return this}toHSL(){return this.toHSLA().toHSL()}toHSLA(){const[t,e]=((t,e)=>{const r=(2-t/100)*e/2;return[0===r?0:t*e/(r<50?2*r:200-2*r),r].map(A)})(this.saturation,this.brightness);return new E(this.hue,t,e,this.alpha)}toHexadecimal(){return this.toRGBA().toHexadecimal()}toGUI_HSLA(){return this.toHSLA().toGUI_HSLA()}withAlpha(t){return new R(this.hue,this.saturation,this.brightness,t)}}class O{constructor(t,e,r){Object.defineProperty(this,"hue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"saturation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lightness",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.hue=t,this.saturation=e,this.lightness=r,this.proxy=this.toHSLA()}equals(t){if("object"==typeof t&&"toHSL"in t){const e=t.toHSL();return this.hue===e.hue&&this.saturation===e.saturation&&this.lightness===e.lightness}return!1}toString(){return`HSL(${this.hue}, ${this.saturation}, ${this.lightness})`}toNLNumber(){return this.proxy.toNLNumber()}toNLWord(){return this.proxy.toNLWord()}toRGB(){return this.proxy.toRGB()}toRGBA(){return this.proxy.toRGBA()}toHSB(){return this.proxy.toHSB()}toHSBA(){return this.proxy.toHSBA()}toHSL(){return this}toHSLA(){return new E(this.hue,this.saturation,this.lightness,100)}toHexadecimal(){return this.proxy.toHexadecimal()}toGUI_HSLA(){return this.proxy.toGUI_HSLA()}withAlpha(t){return this.proxy.withAlpha(t)}}class E{constructor(t,e,r,o){Object.defineProperty(this,"hue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"saturation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lightness",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.hue=t,this.saturation=e,this.lightness=r,this.alpha=o}equals(t){if("object"==typeof t&&"toHSLA"in t){const e=t.toHSLA();return this.hue===e.hue&&this.saturation===e.saturation&&this.lightness===e.lightness&&this.alpha===e.alpha}return!1}toString(){return`HSLA(${this.hue}, ${this.saturation}, ${this.lightness}, ${this.alpha})`}toNLNumber(){return this.toRGBA().toNLNumber()}toNLWord(){return this.toRGBA().toNLWord()}toRGB(){return this.toRGBA().toRGB()}toRGBA(){const[t,e,r]=((t,e)=>{const r=this.lightness/100,o=e/100*Math.min(r,1-r),n=e=>{const n=(e+t/30)%12,i=r-o*Math.max(-1,Math.min(n-3,9-n,1));return Math.round(255*i)};return[n(0),n(8),n(4)]})(this.hue,this.saturation);return new G(t,e,r,this.alpha)}toHSB(){const t=this.toHSBA();return new $(t.hue,t.saturation,t.brightness)}toHSBA(){const[t,e]=((t,e)=>{const r=t*(e<50?e:100-e)/100,o=e+r;return[0!==o?A(200*r/o):0,A(o)]})(this.saturation,this.lightness);return new R(this.hue,t,e,this.alpha)}toHSL(){return new O(this.hue,this.saturation,this.lightness)}toHSLA(){return this}toHexadecimal(){return this.toRGBA().toHexadecimal()}toGUI_HSLA(){const t=1+this.saturation/100,e=100-Math.min(100,this.lightness*t),r=this.hue/360*100;return new j(r,this.saturation,e,this.alpha)}withAlpha(t){return new E(this.hue,this.saturation,this.lightness,t)}}class D{constructor(t,e,r,o){Object.defineProperty(this,"red",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"green",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.red=t,this.green=e,this.blue=r,this.alpha=o,this.proxy=new G(t,e,r,o)}static parse(t){const e=t.slice(1);if(6===e.length||8===e.length){const[t,r,o,n]=[0,2,4,6].map((t=>parseInt(e.slice(t,t+2),16))),i=isNaN(n)?100:Math.round(n/255*100);return new D(t,r,o,i)}throw new Error(`Unparseable hexadecimal: ${t}`)}hex(){const t=t=>t.toString(16).padStart(2,"0"),e=this.toRGBA(),r=e.alpha<100?t(Math.round(e.alpha/100*255)):"";return`#${t(e.red)}${t(e.green)}${t(e.blue)}${r}`}equals(t){if("object"==typeof t&&"toHexadecimal"in t){const e=t.toHexadecimal();return this.red===e.red&&this.green===e.green&&this.blue===e.blue&&this.alpha===e.alpha}return!1}toString(){return`Hexadecimal(${this.hex()})`}toNLNumber(){return this.proxy.toNLNumber()}toNLWord(){return this.proxy.toNLWord()}toRGB(){return this.proxy.toRGB()}toRGBA(){return this.proxy}toHSB(){return this.proxy.toHSB()}toHSBA(){return this.proxy.toHSBA()}toHSL(){return this.proxy.toHSL()}toHSLA(){return this.proxy.toHSLA()}toHexadecimal(){return this}toGUI_HSLA(){return this.proxy.toGUI_HSLA()}withAlpha(t){return this.proxy.withAlpha(t)}}class j{constructor(t,e,r,o){Object.defineProperty(this,"hue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"saturation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lightness",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.hue=t,this.saturation=e,this.lightness=r,this.alpha=o,this.proxy=this.toHSLA()}equals(t){if("object"==typeof t&&"toGUI_HSLA"in t){const e=t.toGUI_HSLA();return this.hue===e.hue&&this.saturation===e.saturation&&this.lightness===e.lightness&&this.alpha===e.alpha}return!1}toString(){return`GUI_HSLA(${this.hue}, ${this.saturation}, ${this.lightness}, ${this.alpha})`}toNLNumber(){return this.proxy.toNLNumber()}toNLWord(){return this.proxy.toNLWord()}toRGB(){return this.proxy.toRGB()}toRGBA(){return this.proxy.toRGBA()}toHSB(){return this.proxy.toHSB()}toHSBA(){return this.proxy.toHSBA()}toHSL(){return this.proxy.toHSL()}toHSLA(){const t=x(this.hue),e=this.saturation,r=(100-this.lightness)/(1+this.saturation/100),o=this.alpha;return new E(t,e,r,o)}toHexadecimal(){return this.proxy.toHexadecimal()}toGUI_HSLA(){return this}withHue(t){return new j(t,this.saturation,this.lightness,this.alpha)}withSaturation(t){return new j(this.hue,t,this.lightness,this.alpha)}withLightness(t){return new j(this.hue,this.saturation,t,this.alpha)}withAlpha(t){return new j(this.hue,this.saturation,this.lightness,t)}}const P=t=>Math.max(0,Math.min(100,t)),M={"nl-number":"netlogo-number-controls","nl-word":"netlogo-word-controls",hsb:"hsb-controls",hsba:"hsba-controls",hsl:"hsl-controls",hsla:"hsla-controls",rgb:"rgb-controls",rgba:"rgba-controls",hex:"hex-controls"},C=new Map([[o.NLNumber,"nl-number"],[o.NLWord,"nl-word"],[o.RGB,"rgb"],[o.RGBA,"rgba"],[o.HSB,"hsb"],[o.HSBA,"hsba"],[o.HSL,"hsl"],[o.HSLA,"hsla"]]);class W{constructor(o){Object.defineProperty(this,"findElemByID",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"findElems",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"findFirstElem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setInputByID",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const n=t(o)("advanced-pane");this.findElemByID=t(o),this.findElems=e(n),this.findFirstElem=r(n),this.setInputByID=(e=>(r,o)=>{var n;(n=t(e)(r),t=>{n.value=t.toString()})(o)})(o)}findActiveControls(){return this.findElems(".repr-controls-container .repr-controls").find((t=>"flex"===t.style.display))}findInputValues(){const t=this.findReprDropdown(),r=M[t.value],o=this.findElemByID(r);return e(o)(".repr-input").map((t=>t.value))}findOutputDropdown(){return this.findElemByID("output-format-dropdown")}findReprDropdown(){return this.findElemByID("repr-dropdown")}}class U{setupDrag1DX(t,e,r){let o=!1;const n=e=>{const{left:o,right:n,width:i}=t.getBoundingClientRect(),s=(e<o?o:e>n?n:e)-o,a=Math.round(s/i*100);r(a)},i=t=>{0==t.button&&(o=!1,e.body.classList.remove("dragging"))};t.addEventListener("mousedown",(t=>{0==t.button&&(o=!0,n(t.clientX),e.body.classList.add("dragging"))}),!1),e.addEventListener("mousemove",(t=>{o&&n(t.clientX)}),!1),e.addEventListener("mouseup",i,!1),e.addEventListener("mouseleave",i,!1)}setupDrag1DY(t,e,r){let o=!1;const n=e=>{const{bottom:o,top:n,height:i}=t.getBoundingClientRect(),s=o-(e<n?n:e>o?o:e),a=Math.round(s/i*100);r(a)},i=t=>{0==t.button&&(o=!1,e.body.classList.remove("dragging"))};t.addEventListener("mousedown",(t=>{0==t.button&&(o=!0,n(t.clientY),e.body.classList.add("dragging"))}),!1),e.addEventListener("mousemove",(t=>{o&&n(t.clientY)}),!1),e.addEventListener("mouseup",i,!1),e.addEventListener("mouseleave",i,!1)}setupDrag2D(t,e,r){let o=!1;const n=(e,o)=>{const{left:n,right:i,width:s}=t.getBoundingClientRect(),a=(e<n?n:e>i?i:e)-n,u=Math.round(a/s*100),{top:h,bottom:l,height:d}=t.getBoundingClientRect(),c=(o<h?h:o>l?l:o)-h,b=Math.round(c/d*100);r(u,b)},i=t=>{0==t.button&&(o=!1,e.body.classList.remove("dragging"))};t.addEventListener("mousedown",(t=>{0==t.button&&(o=!0,n(t.clientX,t.clientY),e.body.classList.add("dragging"))}),!1),e.addEventListener("mousemove",(t=>{o&&n(t.clientX,t.clientY)}),!1),e.addEventListener("mouseup",i,!1),e.addEventListener("mouseleave",i,!1)}}class _{constructor(){}read(t,e){const r=t.findReprDropdown(),o=t.findInputValues();switch(r.value){case"nl-number":{const[t]=o;e(new k(parseFloat(t)));break}case"nl-word":{const[t]=o;e(N.parse(t));break}case"hsb":{const[t,r,n]=o.map((t=>parseInt(t)));e(new $(t,r,n));break}case"hsba":{const[t,r,n,i]=o.map((t=>parseInt(t)));e(new R(t,r,n,i));break}case"hsl":{const[t,r,n]=o.map((t=>parseInt(t)));e(new O(t,r,n));break}case"hsla":{const[t,r,n,i]=o.map((t=>parseInt(t)));e(new E(t,r,n,i));break}case"rgb":{const[t,r,n]=o.map((t=>parseInt(t)));e(new I(t,r,n));break}case"rgba":{const[t,r,n,i]=o.map((t=>parseInt(t)));e(new G(t,r,n,i));break}case"hex":{const[t]=o;e(D.parse(t));break}default:alert(`Invalid representation dropdown value: ${r.value}`)}}}class T{write(t,e){const r=t.findActiveControls();switch(r.id){case"netlogo-number-controls":t.setInputByID("netlogo-number",e.toNLNumber().number);break;case"netlogo-word-controls":t.setInputByID("netlogo-word",e.toNLWord().toText());break;case"hsb-controls":{const{hue:r,saturation:o,brightness:n}=e.toHSB();t.setInputByID("hsb-h",r),t.setInputByID("hsb-s",o),t.setInputByID("hsb-b",n);break}case"hsba-controls":{const{hue:r,saturation:o,brightness:n,alpha:i}=e.toHSBA();t.setInputByID("hsba-h",r),t.setInputByID("hsba-s",o),t.setInputByID("hsba-b",n),t.setInputByID("hsba-a",i);break}case"hsl-controls":{const{hue:r,saturation:o,lightness:n}=e.toHSL();t.setInputByID("hsl-h",r),t.setInputByID("hsl-s",o),t.setInputByID("hsl-l",n);break}case"hsla-controls":{const{hue:r,saturation:o,lightness:n,alpha:i}=e.toHSLA();t.setInputByID("hsla-h",r),t.setInputByID("hsla-s",o),t.setInputByID("hsla-l",n),t.setInputByID("hsla-a",i);break}case"rgb-controls":{const{red:r,green:o,blue:n}=e.toRGB();t.setInputByID("rgb-r",r),t.setInputByID("rgb-g",o),t.setInputByID("rgb-b",n);break}case"rgba-controls":{const{red:r,green:o,blue:n,alpha:i}=e.toRGBA();t.setInputByID("rgba-r",r),t.setInputByID("rgba-g",o),t.setInputByID("rgba-b",n),t.setInputByID("rgba-a",i);break}case"hex-controls":t.setInputByID("hex",e.toHexadecimal().hex());break;default:alert(`Invalid representation dropdown ID: ${r.id}`)}}}const q=t=>["hsba","hsla","rgba","hex"].includes(t);class V{constructor(t,e){Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repr",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reprReader",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reprWriter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.dom=new W(t),this.repr=new j(0,0,0,0),this.reprReader=new _,this.reprWriter=new T,this.dom.findOutputDropdown().addEventListener("change",(()=>this.updateOutputControl())),this.activateOutputs(e);const r=this.dom.findReprDropdown();r.addEventListener("change",(()=>this.updateReprControls())),r.value="nl-number",this.updateReprControls(),this.setHue(60),this.setSwatchCoords(75,20),this.setAlpha(100),Array.from(this.dom.findElems(".repr-input")).forEach((t=>{t.addEventListener("change",(()=>this.reprReader.read(this.dom,(t=>this.setRepr(t)))))}));const o=new U;o.setupDrag2D(this.dom.findElemByID("swatch-container"),t,((t,e)=>this.setSwatchCoords(t,e))),o.setupDrag1DY(this.dom.findElemByID("alpha-slider"),t,(t=>this.setAlpha(t))),o.setupDrag1DY(this.dom.findElemByID("hue-slider"),t,(t=>this.setHue(t)))}setAlpha(t){const e=P(t);this.repr=this.repr.withAlpha(e),this.dom.findElemByID("alpha-knob").style.bottom=`${e.toFixed(2)}%`,this.updateColor()}setHue(t){const e=P(t);this.repr=this.repr.toGUI_HSLA().withHue(e),this.dom.findElemByID("hue-knob").style.bottom=`${e.toFixed(2)}%`,this.dom.findElemByID("swatch-gradient").style.background=`hsla(${x(t)}deg, 100%, 50%, 100%)`,this.updateColor(),this.updateAlphaGradient()}setSwatchCoords(t,e){const r=P(t),o=P(e);this.repr=this.repr.toGUI_HSLA().withSaturation(r).withLightness(o);const n=this.dom.findElemByID("swatch-pointer");n.style.left=`${r.toFixed(2)}%`,n.style.top=`${o.toFixed(2)}%`,this.updateColor(),this.updateAlphaGradient()}setRepr(t){this.repr=t;const e=t.toGUI_HSLA();this.setHue(e.hue),this.setSwatchCoords(e.saturation,e.lightness),this.setAlpha(e.alpha)}updateColor(){const t=this.repr.toHSLA(),e=`${t.hue}deg, ${t.saturation}%, ${t.lightness}%`;this.dom.findElemByID("preview-color-opaque").style.background=`hsl(${e})`,this.dom.findElemByID("preview-color-transparent").style.background=`hsla(${e}, ${t.alpha}%)`,this.reprWriter.write(this.dom,this.repr),this.updateOutput()}updateOutputControl(){this.updateAlphaVis(),this.updateOutput()}updateOutput(){this.dom.findFirstElem(".output-field").innerText=this.getOutputValue(!1),this.validateControls()}validateControls(){const t=this.repr.toGUI_HSLA().alpha,e=this.dom.findOutputDropdown(),r=q(e.value);100===t||r?(e.classList.remove("alpha-warning"),e.title=""):(e.classList.add("alpha-warning"),e.title="You have chosen a color with alpha (transparency), but this output format does not support transparency, so the output color will be entirely opaque.")}getNLNumberValue(){return this.repr.toNLNumber().number}getOutputValue(t){const e=this.dom.findElemByID("output-format-dropdown").selectedOptions[0].value,r=Array.from(C.entries()),n=t=>Math.round(t/100*255);switch(new Map(r.map((([t,e])=>[e,t]))).get(e)){case o.NLNumber:return this.repr.toNLNumber().number.toString();case o.NLWord:const r=this.repr.toNLWord().toText(),i=!r.includes(" ");return!t||i?r:`(${r})`;case o.RGB:const s=this.repr.toRGB();return`(rgb ${s.red} ${s.green} ${s.blue})`;case o.RGBA:const a=this.repr.toRGBA(),u=n(a.alpha),h=u<255?` ${u}`:"";return`[${a.red} ${a.green} ${a.blue}${h}]`;case o.HSB:const l=this.repr.toHSB();return`(hsb ${l.hue} ${l.saturation} ${l.brightness})`;case o.HSBA:const d=this.repr.toHSBA();return`(lput ${n(d.alpha)} (hsb ${d.hue} ${d.saturation} ${d.brightness}))`;case o.HSL:const c=this.repr.toHSL();return`[${c.hue} ${c.saturation} ${c.lightness}]`;case o.HSLA:const b=this.repr.toHSLA();return`[${b.hue} ${b.saturation} ${b.lightness} ${n(b.alpha)}]`;default:throw new Error(`Unknown output value for output format: ${e}`)}}updateAlphaGradient(){const{hue:t,saturation:e,lightness:r}=this.repr.toHSL(),o=`${t}, ${e}%, ${r}%`;this.dom.findFirstElem(".slider-background.alpha").style.background=`linear-gradient(to top, hsla(${o}, 0) 0%, hsl(${o}) 100%)`}updateReprControls(){this.dom.findElems(".repr-controls-container .repr-controls").forEach((t=>{t.style.display=""}));const t=this.dom.findReprDropdown(),e=M[t.value];this.dom.findElemByID(e).style.display="flex",this.updateAlphaVis(),this.updateColor()}updateAlphaVis(){const t=this.dom.findReprDropdown(),e=this.dom.findOutputDropdown(),r=q(t.value),o=q(e.value),n=this.dom.findElemByID("alpha-wrapper");r||o?n.classList.remove("hidden"):(n.classList.add("hidden"),this.setAlpha(100))}activateOutputs(t){t.forEach((t=>{const e=(r=t,n=t=>{throw new Error(`Impossible output type: ${JSON.stringify(t)}`)},(o=C).has(r)?o.get(r):n(r));var r,o,n;const i=this.dom.findFirstElem(`#output-format-dropdown > option[value=${e}]`);i.disabled=!1,i.selected=!0}))}}const F={dialogBackground:"rgb(238, 238, 238)",dialogText:"black",tabBackground:"white",tabBackgroundHover:"#d3d3d3",tabBackgroundSelected:"rgb(6, 112, 237)",tabBorder:"rgb(175, 175, 175)",tabText:"black",tabTextSelected:"white",controlBackground:"white",controlBackgroundActive:"#0091ff",controlBackgroundHover:"#d3d3d3",controlBorder:"black",controlText:"black",dropdownArrow:"black",genericBorder:"#808080",outputBackground:"#7d7d7d",checkmarkColor:"#3eb84f",copyHover:"#c5c5c5",okButtonBackground:"rgb(6, 112, 237)",okButtonBackgroundHover:"rgb(0, 92, 217)",okButtonBorder:"rgb(6, 112, 237)",okButtonText:"white",okButtonActive:"rgb(0, 72, 197)",cancelButtonBackground:"white",cancelButtonBackgroundHover:"rgb(245, 245, 245)",cancelButtonBorder:"rgb(175, 175, 175)",cancelButtonText:"black",cancelButtonActive:"rgb(215, 215, 215)"};class Y{constructor(e){Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pane",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.color=new k(0),this.pane=t(e)("simple-pane"),[...Array(154).keys()].map((t=>t<=139?t:10*(t-140)+9.9)).sort(((t,e)=>t-e)).forEach((t=>{const[o,n,i]=t%10==0?[0,0,0]:Math.floor(t)!==t?[255,255,255]:H(t),s=`rgb(${o}, ${n}, ${i})`,a=t-10*Math.floor(t/10)<4;let u=e.createElement("div");u.classList.add("swatch-color"),u.classList.add(a?"dark":"light"),"rgb(255, 255, 255)"===s&&u.classList.add("white"),u.style.cssText=`background-color: ${s}; border-color: ${s};`,u.onclick=()=>{this.color=new k(t),r(this.pane)(".output-field").value=this.color.toNLWord().toText(),Array.from(this.pane.querySelectorAll(".swatch-color.selected")).forEach((t=>t.classList.remove("selected"))),u.classList.add("selected")},u.dataset.color_num=(10*t).toString(),this.pane.querySelector(".swatches").append(u)})),this.setColor(0)}getNLNumberValue(){return this.color.number}getOutputValue(t){if(t){const t=r(this.pane)(".output-field").value;return t.includes(" ")?`(${t})`:t}return this.getNLNumberValue().toString()}setColor(t){const r=Math.round(10*t),o=e(this.pane)(".swatch-color");o.slice(1).reduce(((t,e)=>{const o=Math.abs(r-parseInt(t.dataset.color_num));return Math.abs(r-parseInt(e.dataset.color_num))<o?e:t}),o[0]).click()}}const{NLNumber:X,NLWord:J,RGBA:z}=o,K="simple-tab",Q="advanced-tab";var Z=!1;const tt=(o,n)=>{t(document)(o).addEventListener("click",(i=>{const s=r(document)("#tab-strip .tab-button.selected").id;if(Z&&o!==s)switch(o){case K:if(s!==Q)throw new Error(`But what non-simple tab is '${s}'?`);{const t=window.advanced.getNLNumberValue();window.simple.setColor(t)}break;case Q:if(s!==K)throw new Error(`But what non-advanced tab is '${s}'?`);{const t=window.simple.getNLNumberValue(),e=new k(t);window.advanced.setRepr(e)}break;default:throw new Error(`Which tab is this?  ${o}`)}e(document)("#tab-strip .tab-button").forEach((t=>t.classList.remove("selected"))),i.target.classList.add("selected"),e(document)("#content-pane .pane").forEach((t=>t.classList.add("hidden"))),t(document)(n).classList.remove("hidden")}))};window.addEventListener("load",(()=>{const r=navigator.platform;("MacIntel"===r||r.startsWith("iPad")||r.startsWith("iPhone"))&&document.body.classList.add("apple2025"),window.nlBabyMonitor={onPick:t=>{},onCopy:t=>{navigator.clipboard.writeText(t)},onCancel:()=>{}},tt(K,"simple-pane"),tt(Q,"advanced-pane"),(r=>{const o=t(r)("outputs-template").content;Array.from(e(r)(".outputs-placeholder")).forEach((t=>{const e=o.cloneNode(!0);t.parentNode.replaceChild(e,t)}))})(document),window.simple=new Y(document),window.advanced=new V(document,new Set([])),t(document)("pick-button").addEventListener("click",(t=>{window.nlBabyMonitor.onPick(et(!1))})),t(document)("cancel-button").addEventListener("click",(t=>{window.nlBabyMonitor.onCancel()})),Array.from(e(document)(".copy-button")).forEach((t=>{var e=!1;t.addEventListener("click",(()=>{e||(t.classList.add("on-cooldown"),e=!0,setTimeout((()=>{t.classList.remove("on-cooldown"),e=!1}),1200),window.nlBabyMonitor.onCopy(et(!0)))}))})),window.syncTheme({}),Z=!0})),window.injectCSS=t=>{const e=document.createElement("style");e.textContent=t,document.head.append(e)},window.useNumberOnlyPicker=()=>{window.advanced=new V(document,new Set([X]))},window.useNonPickPicker=()=>{t(document)("pick-button").classList.add("hidden"),window.advanced=new V(document,new Set([X,J,z]))},window.useNumAndRGBAPicker=()=>{window.advanced=new V(document,new Set([X,z]))},window.setValue=(t,e)=>{let r;if("number"===t)r=new k(e);else if("rgb"===t){const{red:t,green:o,blue:n}=e;r=new I(t,o,n)}else{if("rgba"!==t)throw new Error(`Unknown value type: ${e}`);{const{red:t,green:o,blue:n,alpha:i}=e;r=new G(t,o,n,i)}}window.simple.setColor(r.toNLNumber().number),window.advanced.setRepr(r)},window.switchToAdvPicker=()=>{document.getElementById(Q).click()},window.syncTheme=t=>{((t,e)=>{const r={...F,...t},o=(t,r)=>e.style.setProperty(t,r);o("--dialog-background",r.dialogBackground),o("--dialog-text",r.dialogText),o("--tab-background",r.tabBackground),o("--tab-background-hover",r.tabBackgroundHover),o("--tab-background-selected",r.tabBackgroundSelected),o("--tab-border",r.tabBorder),o("--tab-text",r.tabText),o("--tab-text-selected",r.tabTextSelected),o("--control-background",r.controlBackground),o("--control-background-active",r.controlBackgroundActive),o("--control-background-hover",r.controlBackgroundHover),o("--control-border",r.controlBorder),o("--control-text",r.controlText),o("--dropdown-arrow",r.dropdownArrow),o("--generic-border",r.genericBorder),o("--output-background",r.outputBackground),o("--checkmark-color",r.checkmarkColor),o("--copy-hover",r.copyHover),o("--ok-button-background",r.okButtonBackground),o("--ok-button-background-hover",r.okButtonBackgroundHover),o("--ok-button-border",r.okButtonBorder),o("--ok-button-text",r.okButtonText),o("--ok-button-active",r.okButtonActive),o("--cancel-button-background",r.cancelButtonBackground),o("--cancel-button-background-hover",r.cancelButtonBackgroundHover),o("--cancel-button-border",r.cancelButtonBorder),o("--cancel-button-text",r.cancelButtonText),o("--cancel-button-active",r.cancelButtonActive)})(t,document.body)};const et=t=>{const e=r(document)("#tab-strip .tab-button.selected");switch(e.id){case K:return window.simple.getOutputValue(t);case Q:return window.advanced.getOutputValue(t);default:throw new Error(`Unknown picker type tab ID: ${e.id}`)}}})();